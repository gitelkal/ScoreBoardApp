<div class="relative inline-block text-left">
  <button class="bg-[#b30000]/90 text-white1 px-4 py-2 shadow-[0_24px_24px_rgba(255,255,255,0.25)] rounded-b hover:bg-[#b30000] transition" (click)="toggleViewDropdown()">Ändra vy</button>
  <div *ngIf="isViewDropdownOpen" class="origin-top-right absolute left-0 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10">
    <div class="py-1" role="menu" aria-orientation="vertical" aria-labelledby="options-menu">
      <a [routerLink]="['/scoreboard', scoreboardID]" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" role="menuitem">Hackaton</a>
      <a [routerLink]="['/scoreboard-dark', scoreboardID]" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" role="menuitem">Mörk tavla</a>
    </div>
  </div>
</div>

<button (click)="openFullscreen()" class="bg-[#b30000]/90 text-white1 px-4 py-2 shadow-[0_24px_24px_rgba(255,255,255,0.25)] rounded-b hover:bg-[#b30000] transition">
  Fullskärm </button>
<button (click)="closeFullscreen()" class="bg-[#b30000]/90 text-white1 px-4 py-2 shadow-[0_24px_24px_rgba(255,255,255,0.25)] rounded-b hover:bg-[#b30000] transition">
  Avbryt fullskärm </button>

<div *ngIf="getRichScoreboard$ | async as richScoreboard" class="w-full min-h-screen fin-bakgrund flex items-start justify-center pt-6">
  <div class="max-w-5xl w-full mx-auto p-6 rounded-lg shadow-lg backdrop-blur-lg bg-white/20 border border-gray-300 flex flex-col min-w-[min-content]">
    <div class="bg-gradient-to-r from-red-700 to-yellow-500 p-4 rounded-lg shadow-md text-center relative">    
      <h2 class="text-3xl font-bold text-white mb-2 [text-shadow:_0_4px_4px_rgb(0_0_0_/_0.8)]">
        {{ richScoreboard.scoreboard.name }}
      </h2>
      <div *ngIf="(isAdmin | async) === true" class="mt-4 flex flex-col items-center space-y-2 bg-white/20 p-4 rounded-lg shadow-md">
        <label class="text-gray-900 font-semibold">
          Antal uppgifter per lag:
          <input type="number" [value]="taskCount" (input)="onTaskCountChange($event)" class="border border-gray-300 rounded px-2 py-1 w-20 text-center">
        </label>
        <label class="text-gray-900 font-semibold">
          Poäng per uppgift:
          <input type="number" [value]="pointsPerTask" (input)="onPointsPerTaskChange($event)" class="border border-gray-300 rounded px-2 py-1 w-20 text-center">
        </label>
      </div>
    </div>

    <div class="mt-4 p-6 bg-white/10 backdrop-blur-md rounded-lg shadow-md border border-gray-300 min-w-[min-content] flex flex-col justify-end items-center"
     [ngStyle]="{'min-height': (taskCount * 25 + 200) + 'px'}">
      <div class="flex justify-center w-full space-x-6 items-end"> 
        <div *ngFor="let team of richScoreboard.scoreboard.teams" class="relative flex flex-col items-center w-[10%] transition-all duration-500">
          <div class="relative flex flex-col justify-end items-center w-full"
                [ngStyle]="{'height': (taskCount * 20) + 'px'}"> 
            <div class="absolute bottom-0 w-12 border-2 border-gray-300 opacity-50 rounded-md flex flex-col justify-end">
              <div *ngFor="let task of [].constructor(taskCount)" class="w-full h-4 bg-gray-300 rounded-sm m-[1px]">
              </div>
            </div>

            <div class="absolute bottom-0 w-12 flex flex-col justify-end items-center transition-all duration-500"
                [ngStyle]="{'height': (getCompletedTasks(team.teamID) * 20) + 'px'}">
              <div *ngFor="let task of [].constructor(getCompletedTasks(team.teamID)); let i = index"
                  [ngStyle]="{'background': getTaskColor(i), 'height': '20px', 'opacity': '1'}" class="w-full rounded-sm m-[1px] shadow-md">
              </div>
            </div>
          </div>

          <div class="w-full text-center mt-3 flex flex-col justify-between items-center">
            <div class="bg-gray-800 text-white text-sm font-bold p-6 rounded-md shadow-md flex items-center justify-center w-24 h-[40px]">
              {{ team.teamName }}
            </div>
            <div class="text-sm font-semibold text-gray-300 flex items-center justify-center h-[30px]">
              Poäng: {{ team.points }}
            </div>
          </div>

          <button (click)="completeTask(team.teamID)" class="mt-3 px-4 py-2 bg-green-600 hover:bg-green-500 text-white text-sm rounded-lg shadow-lg transition">
            Uppgift Klar
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
